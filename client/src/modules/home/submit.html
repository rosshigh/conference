<template>
    <div style="padding-top:100px;padding-left:50px;padding-right:50px;">
        <div class="card">
            <div class="card-body">
                <div class="row">
                    <div class="col-4 offset-1">
                        <form if.bind="!isAuthenticated && !showRegisterPanel" class="form-inline my-2 my-lg-0">
                            <label if.bind="loginError" style="color:white;margin-right:5px;">${loginError}</label>
                            <div class="form-group mb-2">
                                <input value.bind="email" type="email" autofocus class="form-control" id="loginemail"
                                    placeholder="Email"></input>
                            </div>
                            <div class="form-group mx-sm-3 mb-2">
                                <input value.bind="password" type="password" class="form-control" id="loginpassword"
                                    placeholder="Password"></input>
                            </div>
                            <button class="btn btn-primary mb-2" click.delegate='login()'>Login</button>
                            <button class="btn btn-primary mb-2" style="margin-left:5px;" click.delegate='showRegister()'>Register</button>
                        </form>
                        <div show.bind="showRegisterPanel">
                            <h2>Register as an Author</h2>
                            <form>
                                <div class="form-group">
                                    <label for="firstName">First name *</label>
                                    <input value.bind="firstName" type="text" class="form-control" id="firstName"
                                        aria-describedby="firstNameHelp" placeholder="First Name">
                                </div>
                                <div class="form-group">
                                    <label for="lastName">Last name *</label>
                                    <input value.bind="lastName" type="text" class="form-control" id="lastName"
                                        aria-describedby="lastNameHelp" placeholder="Last Name">
                                </div>
                                <div class="form-group">
                                    <label for="university">University/Company *</label>
                                    <input value.bind="university" type="text" class="form-control" id="university"
                                        aria-describedby="universityHelp" placeholder="University">
                                </div>
                                <div class="form-group">
                                    <label for="email">Email *</label>
                                    <input value.bind="email" type="email" class="form-control" id="email"
                                        aria-describedby="emailHelp" placeholder="Email">
                                </div>
                                <div class="form-group">
                                    <label for="password">Password *</label>
                                    <input value.bind="password" type="password" class="form-control" id="password"
                                        aria-describedby="passwordHelp" placeholder="Password">
                                </div>
                                <div class="form-group">
                                    <label for="password_repeat">Repeat password *</label>
                                    <input value.bind="password_repeat" type="password" class="form-control"
                                        id="password_repeat" aria-describedby="passwordrepeatHelp"
                                        placeholder="Repeat Password">
                                </div>
                                <button class="btn btn-primary" style="margin-top:25px"
                                    click.trigger="save()">Register</button>
                            </form>
                        </div>
                        <div show.bind="isAuthenticated">
                                <form>
                                    <h3>${userObj.firstName} ${userObj.lastName}</h3>
                                    <h3>${userObj.university}</h3>
                                    <div class="form-group">
                                        <label for="title">Title *</label>
                                        <input value.bind="title" type="text" class="form-control" id="title"
                                            aria-describedby="titleHelp" placeholder="Title">
                                    </div>
                                    <div class="form-group">
                                        <label for="description">Track *</label>
                                        <select value.bind="track" class="form-control" id="track">
                                            <option value="">Select a track</option>
                                            <option value="${type}" repeat.for="type of tracks">${type}</optionp>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label for="description">Description *</label>
                                        <textarea value.bind="description" type="text" class="form-control" id="description"
                                            aria-describedby="descriptionHelp" placeholder="Description"
                                            rows="10"></textarea>
                                    </div>
                                    <div class="row">
                                        <div class="col-4">
                                            <label class="btn btn-primary">
                                                Browse for files&hellip; <input type="file" style="display: none;"
                                                    change.delegate="changeFiles()" files.bind="files">
                                            </label>
                                            <span id="files"></span>
                                        </div>
                                        <div class="col">
                                            <ul>
                                                <li repeat.for="file of filesToUpload" class="list-group-item">
                                                    ${file.name}<span click.delegate="removeFile($index)"
                                                        class="pull-right"><i class="fa fa-trash"
                                                            aria-hidden="true"></i></span></li>
                                            </ul>
                                        </div>
                                    </div>
                                    <button class="btn btn-primary" style="margin-top:25px"
                                        click.trigger="submit()">Submit</button>
                                </form>
                            </div>
                    </div>
                    <div class="col-5 offset-1" show.bind="isAuthenticated">
                        <h2>Submissions</h2>
                        <ul class="list-group">
                            <li repeat.for="submission of services.abstractArray" class="list-group-item">
                                <h3>${submission.title}</h3>
                                <h6>Status: ${submission.status}</h6>
                            </li>
                        </ul>
                    </div>
                </div>


            </div>
        </div>
    </div>
</template>